<ion-header>
    <ion-toolbar class="custom-toolbar">
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Inbox</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)" pullFactor="10">
        <ion-refresher-content>
        </ion-refresher-content>
    </ion-refresher>
    <ion-fab *ngIf="type !== 'user'" vertical="bottom" horizontal="start" slot="fixed">
        <ion-fab-button style="--background: #1B8895;">
            <ion-icon name="add"></ion-icon>
        </ion-fab-button>
        <ion-fab-list side="top">
            <ion-fab-button class="fav-btn action-fab-btn">
                <a routerLink="/new-loop">
                    New Loop
                </a>
            </ion-fab-button>
            <ion-fab-button class="fav-btn action-fab-btn">
                <a routerLink="/new-message">
                    New Private Message
                </a>
            </ion-fab-button>
        </ion-fab-list>
    </ion-fab>
    <ion-fab *ngIf="type === 'user'" vertical="bottom" horizontal="start" slot="fixed">
        <a routerLink="/new-message">
            <ion-fab-button style="--background: #1B8895;">
                <ion-icon name="add"></ion-icon>
            </ion-fab-button>
        </a>
    </ion-fab>
    <ion-list class="ion-no-padding">
        <ion-item *ngFor="let item of list; let i = index" lines="full" (click)="openModal(i)">
            <ion-avatar slot="start">
                <img src="/assets/images/ic_action_signal.png">
            </ion-avatar>
            <ion-label class="list-item">
                <h2>{{item.recipient_name}}</h2>
                <h3>{{item.title}}</h3>
                <p class="img-container" [innerHTML]="item.content"></p>
            </ion-label>
            <ion-label slot="end" style="margin-bottom: auto" class="ion-text-right">
                <h2>{{item.created_at | date: 'dd/MM/yyyy'}}</h2>
                <img src="/assets/images/ic_action_picture.png">
            </ion-label>
        </ion-item>
        <ion-item *ngIf="list && list.length <= 0" class="ion-text-center">
            No inbox found!
        </ion-item>
    </ion-list>
</ion-content>
